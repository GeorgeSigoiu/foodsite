<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOCUMENT</title>
    <!-- Mumble UI -->
    <link rel="stylesheet" href="{% static 'uikit/styles/uikit.css' %}" />

    <!-- Bootstarp 3-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="{% static 'styles/app.css' %}">

    <!-- Icon - IconMonster -->
    <link rel="stylesheet" href="https://cdn.iconmonstr.com/1.3.0/css/iconmonstr-iconic-font.min.css" />
  </head>
  <body>
    {% include 'navbar.html' %} 
    {% block content %} 
    {% endblock content %} 
    {% include 'footer.html' %}
    
    <script src="../static/js/javascript.js"></script>
    <script>
      
    let market = []
    const addToCosBtns = document.querySelectorAll('.btn-add-cos')
    const badge = document.querySelector('.badge')
    const cartBtn = document.querySelector('#show-products-market')

    const sendProducts=function(){
      $.ajax({
            type: "POST",
            url: '/transferBetweenDJandJS',
            data: {
                "market": market,
                'csrfmiddlewaretoken': '{{ csrf_token }}',
            },
            dataType: "json",
        });
    }

    addToCosBtns.forEach(btn => {
        btn.addEventListener("click", function () {
            market=[]
            let contentBadge = badge.textContent;
            if (contentBadge === "") contentBadge = 0;
            else contentBadge = Number(contentBadge)
            contentBadge += 1;
            badge.textContent = contentBadge
            market.push(btn.getAttribute('id'))
            sendProducts()
            
        })
    })
    const numberOfProducts='{{numberOfProducts}}'
    if(numberOfProducts>0)
      badge.textContent=numberOfProducts
    </script>
    
    <script src="https://kit.fontawesome.com/5a450054d9.js" crossorigin="anonymous"></script>
    
  </body>
</html>
